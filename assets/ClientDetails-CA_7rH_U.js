import{f as w,r as D,h as L,y as N,i as B,c as o,o as a,d as t,k as V,n as E,x as F,t as e,l as r,F as v,m as y,s as S}from"./index-BfXM_CW9.js";import{t as i,f as b}from"./numbers-BTmV-EI5.js";const j={class:"space-y-6"},q={class:"flex items-center justify-between"},z={class:"card"},G={class:"grid sm:grid-cols-2 gap-4"},M={class:"font-medium text-lg"},R={class:"font-medium font-mono text-lg"},T={class:"font-medium"},A={class:"font-medium text-green-600 text-lg"},H={class:"font-medium text-lg"},I={class:"card overflow-hidden"},J={class:"table"},K={class:"list-disc pr-5"},O={class:"font-bold"},W={__name:"ClientDetails",setup(P){const h=w(),l=D(null),k=d=>i(new Date(d).toLocaleString("en-EG"));return L(async()=>{const{id:d}=h.params,s=await N.getCustomer(d);l.value=s.data}),(d,s)=>{var m,c,p,x,f,_;const C=B("router-link");return a(),o("div",j,[t("div",q,[s[1]||(s[1]=t("div",null,[t("h2",{class:"text-2xl font-bold"},"بيانات العميل"),t("p",{class:"text-gray-500"},"عرض معلومات العميل وتاريخ المشتريات")],-1)),V(C,{to:"/clients",class:"btn btn-secondary"},{default:E(()=>[...s[0]||(s[0]=[F("عودة للعملاء",-1)])]),_:1})]),t("div",z,[t("div",G,[t("div",null,[s[2]||(s[2]=t("p",{class:"text-sm text-gray-500"},"الاسم",-1)),t("p",M,e((m=l.value)==null?void 0:m.name),1)]),t("div",null,[s[3]||(s[3]=t("p",{class:"text-sm text-gray-500"},"الهاتف",-1)),t("p",R,e(r(i)((c=l.value)==null?void 0:c.phone)),1)]),t("div",null,[s[4]||(s[4]=t("p",{class:"text-sm text-gray-500"},"العنوان",-1)),t("p",T,e(((p=l.value)==null?void 0:p.address)||"-"),1)]),t("div",null,[s[5]||(s[5]=t("p",{class:"text-sm text-gray-500"},"إجمالي المشتريات",-1)),t("p",A,e(r(b)(((x=l.value)==null?void 0:x.total_purchases)||0)),1)]),t("div",null,[s[6]||(s[6]=t("p",{class:"text-sm text-gray-500"},"عدد الطلبات",-1)),t("p",H,e(r(i)(((f=l.value)==null?void 0:f.total_orders)||0)),1)])])]),t("div",I,[s[8]||(s[8]=t("h3",{class:"text-lg font-bold mb-4"},"سجل المشتريات",-1)),t("table",J,[s[7]||(s[7]=t("thead",null,[t("tr",null,[t("th",null,"رقم الفاتورة"),t("th",null,"التاريخ"),t("th",null,"المنتجات"),t("th",null,"الإجمالي"),t("th",null,"الحالة")])],-1)),t("tbody",null,[(a(!0),o(v,null,y(((_=l.value)==null?void 0:_.sales)||[],n=>(a(),o("tr",{key:n.id},[t("td",null,e(n.invoice_number),1),t("td",null,e(k(n.created_at)),1),t("td",null,[t("ul",K,[(a(!0),o(v,null,y(n.items,u=>{var g;return a(),o("li",{key:u.id},e((g=u.product)==null?void 0:g.name)+" × "+e(r(i)(u.quantity)),1)}),128))])]),t("td",O,e(r(b)(n.total)),1),t("td",null,[t("span",{class:S(["px-2 py-1 text-xs rounded-full",n.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},e(n.status==="completed"?"مكتملة":"ملغاة"),3)])]))),128))])])])])}}};export{W as default};
