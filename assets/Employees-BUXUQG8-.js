import{b as P,r as i,h as T,c as o,o as r,d as e,j as _,k as v,l as g,F as k,m as C,t as n,s as B,w as V,e as p,v as b,z as I,A as N,y as c}from"./index-DqXjIJcs.js";import{U as R}from"./user-plus-DoA5nAw4.js";import{c as S}from"./createLucideIcon-BqgbQl_o.js";import{T as j}from"./trash-2-CGMHs5Iz.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=S("PenIcon",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),D={class:"space-y-6"},F={class:"flex justify-between items-center"},$={class:"bg-white rounded-lg shadow overflow-hidden"},Z={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},H={class:"px-6 py-4 whitespace-nowrap"},J={class:"px-6 py-4 whitespace-nowrap text-gray-600"},K={class:"px-6 py-4 whitespace-nowrap"},O={class:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},Q={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-nowrap text-sm"},X=["onClick"],Y=["onClick"],ee={class:"bg-white rounded-lg p-6 w-full max-w-md"},te={class:"text-xl font-bold mb-4"},se={key:0},ae=["value"],le={class:"flex items-center gap-2"},ue={__name:"Employees",setup(oe){const m=P(),f=i([]),w=i([]),d=i(!1),u=i(!1),x=i(null),a=i({name:"",email:"",password:"",role:"cashier",is_active:!0}),E=l=>({admin:"مدير",manager:"مدير فرع",cashier:"كاشير",inventory:"مخزن"})[l]||l,y=async()=>{const[l,t]=await Promise.all([c.getEmployees(),c.getRoles()]);f.value=l.data.data||l.data,w.value=t.data},U=()=>{u.value=!1,x.value=null,a.value={name:"",email:"",password:"",role:"cashier",is_active:!0},d.value=!0},z=l=>{u.value=!0,x.value=l.id,a.value={name:l.name,email:l.email,password:"",role:l.role,is_active:!!l.is_active},d.value=!0},h=()=>{d.value=!1},M=async()=>{try{if(u.value){const l={name:a.value.name,email:a.value.email,role:a.value.role,is_active:a.value.is_active};await c.updateEmployee(x.value,l),m.success("تم تحديث الموظف بنجاح")}else await c.createEmployee(a.value),m.success("تم إضافة الموظف بنجاح");d.value=!1,y()}catch{m.error("حدث خطأ أثناء الحفظ")}},q=async l=>{confirm("هل أنت متأكد من الحذف؟")&&(await c.deleteEmployee(l.id),m.success("تم الحذف"),y())};return T(y),(l,t)=>(r(),o("div",D,[e("div",F,[t[6]||(t[6]=e("h2",{class:"text-2xl font-bold text-gray-900"},"إدارة الموظفين",-1)),e("button",{onClick:U,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2"},[v(g(R),{size:20}),t[5]||(t[5]=e("span",null,"إضافة موظف",-1))])]),e("div",$,[e("table",Z,[t[7]||(t[7]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"الاسم"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"البريد الإلكتروني"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"الدور"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"الحالة"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"الإجراءات")])],-1)),e("tbody",G,[(r(!0),o(k,null,C(f.value,s=>(r(),o("tr",{key:s.id},[e("td",H,n(s.name),1),e("td",J,n(s.email),1),e("td",K,[e("span",O,n(E(s.role)),1)]),e("td",Q,[e("span",{class:B(["px-2 py-1 text-xs font-semibold rounded-full",s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(s.is_active?"نشط":"غير نشط"),3)]),e("td",W,[e("button",{onClick:L=>z(s),class:"text-primary-600 hover:text-primary-900 ml-3"},[v(g(A),{size:18})],8,X),e("button",{onClick:L=>q(s),class:"text-red-600 hover:text-red-800"},[v(g(j),{size:18})],8,Y)])]))),128))])])]),d.value?(r(),o("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 grid place-items-center z-50",onClick:V(h,["self"])},[e("div",ee,[e("h3",te,n(u.value?"تعديل موظف":"إضافة موظف"),1),e("form",{onSubmit:V(M,["prevent"]),class:"space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"الاسم",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.name=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",required:""},null,512),[[b,a.value.name]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"البريد الإلكتروني",-1)),p(e("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.email=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",required:""},null,512),[[b,a.value.email]])]),u.value?_("",!0):(r(),o("div",se,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"كلمة المرور",-1)),p(e("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.password=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",required:""},null,512),[[b,a.value.password]])])),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"الدور",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.role=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",required:""},[(r(!0),o(k,null,C(w.value,s=>(r(),o("option",{key:s.id,value:s.name},n(s.name_ar),9,ae))),128))],512),[[I,a.value.role]])]),e("div",le,[p(e("input",{id:"active",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.is_active=s),class:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"},null,512),[[N,a.value.is_active]]),t[12]||(t[12]=e("label",{for:"active",class:"text-sm font-medium text-gray-700"},"حساب نشط",-1))]),e("div",{class:"flex gap-3 pt-4"},[t[13]||(t[13]=e("button",{type:"submit",class:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"},"حفظ",-1)),e("button",{type:"button",onClick:h,class:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"},"إلغاء")])],32)])])):_("",!0)]))}};export{ue as default};
